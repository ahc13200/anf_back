(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e0e1dfb","chunk-19101630"],{"1cb7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"form_container",staticClass:"card position-relative mb-0",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save_model()}}},[e.loading?a("spinner"):e._e(),e._m(0),a("div",{staticClass:"card-body p-0"},[a("tc-form",{ref:"form",staticClass:"form-row row",attrs:{feedbacks:e.mb.statics("Person").feedbacks,vobject:e.$v,nested:"person"}},[a("div",{staticClass:"col-md-6"},[a("tc-form-item",{staticClass:"form-group mb-0 col-md-6 px-3"},[a("label",[e._v("Nombre"),a("span",{staticClass:"required_field"},[e._v("*")])]),a("tc-input",{attrs:{placeholder:"Ingrese el valor",name:"first_name"},model:{value:e.person.first_name,callback:function(t){e.$set(e.person,"first_name",t)},expression:"person.first_name"}})],1),a("tc-form-item",{staticClass:"form-group mb-0 col-md-6 px-3"},[a("label",[e._v("Apellido"),a("span",{staticClass:"required_field"},[e._v("*")])]),a("tc-input",{attrs:{placeholder:"Ingrese el valor",name:"last_name"},model:{value:e.person.last_name,callback:function(t){e.$set(e.person,"last_name",t)},expression:"person.last_name"}})],1),a("tc-form-item",{staticClass:"form-group mb-0 col-md-6 px-3"},[a("label",[e._v("Correo"),a("span",{staticClass:"required_field"},[e._v("*")])]),a("tc-input",{attrs:{placeholder:"Ingrese el valor",name:"email"},model:{value:e.person.email,callback:function(t){e.$set(e.person,"email",t)},expression:"person.email"}})],1)],1),a("div",{staticClass:"col-md-6"},[a("tc-form-item",{staticClass:"form-group mb-0 col-md-6 px-3"},[a("label",[e._v("Edad"),a("span",{staticClass:"required_field"},[e._v("*")])]),a("tc-input",{attrs:{placeholder:"Ingrese el valor",type_car:"num",name:"age"},model:{value:e.person.age,callback:function(t){e.$set(e.person,"age",t)},expression:"person.age"}})],1),a("tc-form-item",{staticClass:"form-group mb-0 col-md-6 px-3"},[a("label",[e._v("Sexo"),a("span",{staticClass:"required_field"},[e._v("*")])]),a("tc-autocomplete",{ref:"select_sex",attrs:{placeholder:"Seleccione el Sexo",name:"sex",successFeed:!1,idKey:"sex",textKey:"sex",defaultValue:e.person.sex,"data-source":e.sex},model:{value:e.person.sex,callback:function(t){e.$set(e.person,"sex",t)},expression:"person.sex"}})],1)],1)])],1),a("div",{staticClass:"card-footer p-0"},[a("a-button-group",{staticStyle:{"margin-bottom":"10px","margin-top":"10px"}},[a("a-tooltip",{attrs:{placement:"topLeft",title:e.person.get_id()?"Actualizar elemento":"Añadir nuevo elemento"}},[a("a-button",{attrs:{disabled:e.loading,type:"primary"},on:{click:function(t){return e.save_model()}}},[e._v(e._s(e.button_text))])],1),a("a-tooltip",{attrs:{placement:"topLeft",title:"Cancelar acción"}},[a("a-button",{attrs:{disabled:e.loading,type:"danger"},on:{click:function(t){return e.cancel()}}},[e._v("Cancel")])],1)],1)],1)],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row row-breadcrumb"},[a("div",{staticClass:"col-md-6"},[a("h4",[e._v("Insertar Usuario")])])])}],l=(a("14d9"),a("2494")),i=a("5622"),n={name:"person_form",inject:{close_modal:{default:()=>{}},load_data:{default:()=>{}},refresh:{default:()=>{}}},props:{model:{type:Object,default:()=>{}},modal:{type:Boolean,default:!1},popoverPlacement:{type:String,default:"bottomLeft"}},validations:i["statics"]("Person").validations,data(){return{loading:!1,sex:[{sex:"Masculino"},{sex:"Femenino"}],mb:i,person:i["instance"]("Person")}},computed:{personFeedbacks(){return i["statics"]("Person").feedbacks},button_text(){return this.person.get_id()?"Actualizar":"Añadir"}},mounted:function(){this.person=i["instance"]("Person",this.model)},components:{},methods:{cancel(){this.model?this.modal?this.close_modal(null,!1):this.$router.push({name:"person_list"}):this.$emit("close_modal",!1)},save_model(e=!1){if(this.$refs.form.validate()){this.loading=!0;const e=this.person.get_id()?"actualizado":"añadido";this.person.save().then(t=>{l["m"](t,e),this.refresh(),this.$refs.form.vobject.$reset(),this.person=i["instance"]("Person",{}),this.loading=!1}).catch(e=>{this.loading=!1,l["l"](e)})}}}},r=n,c=(a("c571"),a("2877")),d=Object(c["a"])(r,s,o,!1,null,"044c223b",null);t["default"]=d.exports},2209:function(e,t,a){},3358:function(e,t,a){},5988:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("div",[a("a-modal",{staticClass:"modal-form",attrs:{title:e.selected_person.get_id()?"Actualizar person":"Añadir person",width:"55rem",visible:e.show_modal_form,destroyOnClose:!0,"on-ok":"handleOk",header:null,footer:null,maskClosable:!1},on:{cancel:e.onCloseModal}},[a("person_form",{attrs:{modal:!0,model:e.selected_person}})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("person_table",{ref:"person_table",attrs:{columns:e.columns,table_name:"Person",id_table:"id",params_search:e.params_search,paginate:e.paginate}})],1),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"card"},[e._m(1),a("div",{staticClass:"card-body"},[a("p",[e._v("Promedio:"+e._s(e.calcular.prom))]),a("p",[e._v("Cantidad de personas por sexo")]),a("p",[e._v("Masculino: "+e._s(e.calcular.cantMasc))]),a("p",[e._v("Femenino: "+e._s(e.calcular.cantFem))]),a("p",[e._v("Mayor Edad:"+e._s(e.calcular.nameMay))]),a("p",[e._v("Menor Edad:"+e._s(e.calcular.nameMen))])])])])])],1)])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row row-breadcrumb"},[a("div",{staticClass:"col-md-6"},[a("h4",[e._v("Listado de Usuarios")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-header"},[a("h4",[e._v("Cálculos")])])}],l=a("2494"),i=a("5622"),n=a("1cb7"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-table",{attrs:{columns:e.columns,rowKey:function(t){return t[e.id_table]},dataSource:e.data,rowSelection:e.show_selection?e.rowSelection:null,loading:e.loading,pagination:e.pagination.$data,scroll:{x:"100%"}},on:{change:e.change_table},scopedSlots:e._u([{key:"action",fn:function(t){return e.visible_actions?a("a",{attrs:{href:"javascript:;"}},[a("action_buttons",{attrs:{object:t,visible_view:e.visible_view,visible_edit:e.visible_edit,visible_delete:e.visible_delete,v_instance:e.self,class_name:e.selected_model.class_name()}})],1):e._e()}},{key:"id",fn:function(t){return e._t("id",null,{record:t})}},{key:"first_name",fn:function(t){return e._t("first_name",null,{record:t})}},{key:"last_name",fn:function(t){return e._t("last_name",null,{record:t})}},{key:"sex",fn:function(t){return e._t("sex",null,{record:t})}},{key:"age",fn:function(t){return e._t("age",null,{record:t})}},{key:"email",fn:function(t){return e._t("email",null,{record:t})}}],null,!0)},[a("template",{slot:"title"},[e.visible_heading?a("div",{staticClass:"row"},[a("div",{staticClass:"form-group col-md-6 ml-3"},[a("div",{staticClass:"input-group mb-3"},[a("a-tooltip",{attrs:{placement:"topLeft",title:"Buscar.."}},[a("tc-input",{staticClass:"form-control-filter",attrs:{type:"text",placeholder:"Buscar","aria-label":"",debounce:e.paginate},on:{input:e.update_filter_debounce},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),a("a-tooltip",{attrs:{placement:"topLeft",title:"Limpiar Filtros"}},[a("a-button",{staticClass:"rounded",staticStyle:{"text-align":"end"},attrs:{type:"primary"},on:{click:function(t){e.filter=""}}},[a("i",{staticClass:"fa fa-eraser",staticStyle:{"margin-right":"10px"}}),e._v("Limpiar ")])],1)],1)]),e.show_selection?a("div",{staticClass:"col-md-3",staticStyle:{"text-align":"end"}},[a("p",{staticClass:"export_table"},[e._v(" Elementos seleccionados "+e._s(e.selectedRowKeys.length)+"/"+e._s(e.data.length)+" ")])]):e._e(),a("div",{staticClass:"col-md-2"},[a("a-tooltip",{staticClass:"export_table",attrs:{placement:"topLeft",title:"Exportar"}},[a("a-dropdown-button",{},[a("a-icon",{attrs:{type:"export"}}),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:e.exportToExcel}},[a("a-icon",{attrs:{type:"file-excel",theme:"twoTone",twoToneColor:"#52c41a"}}),e._v(" EXCEL ")],1),a("a-menu-item",{key:"3",on:{click:e.exportToCSV}},[a("a-icon",{attrs:{type:"file-text",theme:"twoTone",twoToneColor:"#2771c4"}}),e._v(" CSV ")],1)],1)],1)],1)],1)]):e._e()])],2)},c=[],d=(a("14d9"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icons-list"},[e.visible_edit?a("a-tooltip",{attrs:{placement:"top",title:"Modificar Elemento"}},[a("a-icon",{staticStyle:{"padding-right":"10px"},attrs:{type:"edit",theme:"twoTone"},on:{click:function(t){return e.v_instance.onEditing(e.object)}}})],1):e._e(),e._e(),e.visible_delete?a("a-tooltip",{attrs:{placement:"top",title:"Borrar Elemento"}},[a("a-icon",{staticStyle:{"padding-right":"10px"},attrs:{type:"delete",theme:"twoTone",twoToneColor:"red"},on:{click:e.showDeleteConfirm}})],1):e._e()],1)}),m=[],p={name:"action_buttons",props:{object:Object,v_instance:Object,class_name:{type:String,default:"BaseModel"},visible_edit:{type:Boolean,default:!0},visible_delete:{type:Boolean,default:!0},visible_view:{type:Boolean,default:!0}},data(){return{model:{}}},methods:{showDeleteConfirm(){let e=this;this.$confirm({title:"Desea eliminar este elemento?",icon:"delete",okText:"Yes",okType:"danger",class:"delete_confirm",cancelText:"No",async onOk(){try{const t=await e.model.delete();l["m"](t,"delete"),e.v_instance.load_data()}catch(t){l["l"](t)}},onCancel(){}})}},mounted(){this.model=i["instance"](this.class_name,this.object)}},u=p,_=(a("c43c"),a("2877")),h=Object(_["a"])(u,d,m,!1,null,"65840001",null),f=h.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},g=[],v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b",[e._v("Rango")]),e._v(" "+e._s(e.start)+"-"+e._s(e.end)+" "),a("b",[e._v("Total")]),e._v(" "+e._s(e.total)),a("span"),a("a-tooltip",{attrs:{placement:"topLeft",title:"Refrescar"}},[a("a-button",{staticStyle:{"margin-left":"10px",height:"28px",width:"28px","font-size":"16px"},attrs:{shape:"circle",icon:"reload"},on:{click:function(t){return e.load_data()}}})],1)],1)},y=[],w={name:"pagination_functions",inject:{load_data:{default:()=>{}}},props:{start:Number,end:Number,total:Number,vm:Object},data(){return{}},methods:{},mounted(){}},x=w,C=Object(_["a"])(x,v,y,!1,null,"12fc0e02",null),k=C.exports,S={name:"VAntdpagination",inject:{load_data:{default:()=>{}}},props:{load_data:Function},data(){return{total:0,defaultCurrent:1,defaultPageSize:10,pageSize:10,hideOnSinglePage:!1,pageSizeOptions:["10","20","30","40"],showQuickJumper:!0,size:"small",simple:!1,showSizeChanger:!0,view_instance:Object,showTotal:this.show_total}},watch:{pageSizeOptions:function(){this.pageSize=Number.parseInt(this.pageSizeOptions[0])}},computed:{},components:{},mounted(){},methods:{show_total(e,t){const a=this.$createElement;let s=t[0],o=t[1];return a(k,{attrs:{start:s,end:o,total:e,load_data:this.$options.props.load_data}})}}},E=S,$=Object(_["a"])(E,b,g,!1,null,"1c669fd3",null),j=$.exports,O=a("2b0e"),P={name:"person_table",components:{action_buttons:f},provide:function(){return{load_data:this.load_data}},inject:{close_modal:{default:()=>{}},show_form:{default:()=>{}},setSelectedPerson:{default:()=>{}}},props:{columns:{type:Array,default:()=>[]},show_selection:{type:Boolean,default:!1},type_selection:{type:String,default:"checkbox"},hide_default_selection:{type:Boolean,default:!0},params_search:{type:Object,default:()=>{}},paginate:{type:Boolean,default:!1},visible_heading:{type:Boolean,default:!0},load_init:{type:Boolean,default:!0},table_name:{type:String,default:""},url:{type:String,default:null},id_table:{type:String,default:""},visible_actions:{type:Boolean,default:!0},visible_edit:{type:Boolean,default:!0},visible_delete:{type:Boolean,default:!0},visible_view:{type:Boolean,default:!1},static_data:{type:Array,default:null}},data(){return{text_select:"Seleccionar todo",selectedRowKeys:[],list:[],page:1,pageSize:10,orderby_params:{},pagination:new O["default"](j),selected_model:i["instance"](this.table_name),loading:!1,data:this.static_data?this.static_data:[],filter:"",filter_debounce:"",show_modal_form:!1,page_params_search:{}}},computed:{page_params(){return{pagination:{page:this.page,pageSize:this.pageSize}}},rowSelection(){const{selectedRowKeys:e}=this;return{selectedRowKeys:e,type:this.type_selection,hideDefaultSelections:this.hide_default_selection,selections:[{key:"all-data",text:this.text_select,onSelect:()=>{this.selectedRowKeys.length===this.data.length?this.selectedRowKeys=[]:this.selectedRowKeys=this.data.map(e=>e[this.id_table])}}],onSelection:this.onSelection,onChange:this.onChange}}},watch:{filter:function(){this.paginate||(this.data=this.list.data.filter(this.filter_data),this.pagination.total=this.data.length)},params_search(e,t){this.load_data()},filter_debounce:function(e,t){this.paginate&&(this.page_params_search={...i["statics"](this.table_name).filter_params(this.filter_debounce,this.columns)},this.load_data())},selectedRowKeys:function(){this.selectedRowKeys.length===this.data.length?this.text_select="Desseleccionar todo":this.text_select="Seleccionar todo"}},methods:{params(){return this.paginate?{...this.page_params_search,...this.page_params,...this.orderby_params,...this.params_search}:this.params_search},exportToExcel(){l["g"](this)},update_filter_debounce(e){this.filter_debounce=e},exportToCSV(){l["f"](this)},filter_data(e){return l["i"](e,this.filter,this.columns)},onChange:function(e){this.selectedRowKeys=e},showDeleteConfirm(){if(0===this.selectedRowKeys.length)return void l["k"]("error","Eliminar elementos seleccionados","Debe seleccionar al menos un elemento");let e=this;this.$confirm({title:"Eliminar elementos seleccionados?",icon:"delete",okText:"Si",okType:"danger",class:"delete_confirm",cancelText:"No",async onOk(){try{const t=await i["statics"](this.table_name).delete_by_ids(e.selectedRowKeys);l["m"](t,"deleted"),e.selectedRowKeys=[],e.load_data()}catch(t){l["l"](t),e.selectedRowKeys=[]}},onCancel(){}})},change_table(e,t,a){if(this.paginate){if(this.page=e.current,this.pageSize=e.pageSize,"{}"!==JSON.stringify(a)){const e="ascend"===a.order?"asc":"desc";this.orderby_params.orderby=[],this.orderby_params.orderby.push({[a.field]:e})}this.load_data()}},async load_data(){if(this.static_data)return 0;try{this.loading=!0,this.list=null==this.url?await i["statics"](this.table_name).list(this.params()):await i["statics"](this.table_name).custom("get",this.url,this.params()),this.data=this.paginate?this.list.data.data:this.list.data.filter(this.filter_data),this.loading=!1,this.pagination.total=this.paginate?this.list.data.total:this.data.length}catch(e){l["l"](e),this.loading=!1}},onEditing(e){this.selected_model=i["instance"](this.table_name,e),this.setSelectedPerson(this.selected_model),this.show_form()}},mounted(){this.load_init&&this.load_data(),this.self=this}},T=P,K=Object(_["a"])(T,r,c,!1,null,"5cae05d1",null),z=K.exports,R={name:"person_list",provide:function(){return{close_modal:this.onCloseModal,show_form:this.show_form,load_data:()=>{this.$refs.person_table.load_data()},setSelectedPerson:this.setSelectedPerson}},data(){return{data:[],self:null,calcular:{},width:document.documentElement.clientWidth,selected_person:i["instance"]("Person"),show_modal_form:!1,paginate:!1,params_search:{relations:[]},mb:i}},components:{person_form:n["default"],person_table:z},computed:{columns(){return this.width>600?i["statics"]("Person").show_columns([],!1):i["statics"]("Person").show_columns(["last_name","age"],!1)}},mounted(){console.log("Holaaa"+this.width),this.calculos(),window.addEventListener("resize",this.getDimensions)},unmounted(){window.removeEventListener("resize",this.getDimensions)},methods:{async calculos(){this.calcular=await i["statics"]("Person").custom("get","calculos"),this.calcular=this.calcular.data,console.log("Fs",this.calcular)},getDimensions(){console.log(this.width),this.width=document.documentElement.clientWidth,this.height=document.documentElement.clientHeight},setSelectedPerson(e){this.selected_person=e},onCloseModal(e,t=!1){this.selected_person=i["instance"]("Person"),this.show_modal_form=!1,t&&this.$refs.person_table.load_data()},show_form(){this.show_modal_form=!this.show_modal_form},showDeleteConfirm(){if(0===this.$refs.person_table.selectedRowKeys.length)return void l["k"]("error","Eliminar elementos seleccionados","Debe seleccionar al menos un elemento");let e=this;this.$confirm({title:"Eliminar elementos seleccionados?",icon:"delete",okText:"Si",okType:"danger",class:"delete_confirm",cancelText:"No",async onOk(){try{const t=await i["statics"]("Person").delete_by_ids(e.$refs.person_table.selectedRowKeys);l["m"](t,"deleted"),e.$refs.person_table.selectedRowKeys=[],e.$refs.person_table.load_data()}catch(t){l["l"](t),e.$refs.person_table.selectedRowKeys=[]}},onCancel(){}})}}},B=R,L=(a("663e"),Object(_["a"])(B,s,o,!1,null,null,null));t["default"]=L.exports},"663e":function(e,t,a){"use strict";a("2209")},c43c:function(e,t,a){"use strict";a("3358")},c571:function(e,t,a){"use strict";a("cdfd")},cdfd:function(e,t,a){}}]);
//# sourceMappingURL=chunk-5e0e1dfb.js.map